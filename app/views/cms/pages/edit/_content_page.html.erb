<section>
	<div class="container edit">
		<% @page.rows.each_with_index do |row, row_index| %>
		
			<div class="row" id="row<%= row_index %>">
				<% row.columns.each_with_index do |column, column_index| %>
				
					<div class="span<%= column.span %> column column<%= column_index %>" id="row<%= row_index %>_column<%= column_index %>">
						
						<% unless !column.rows.empty? %>
							<% column.widgets.each do |widget| %>
								<%= render "cms/widgets/show/#{widget.widget_type}", :widget => widget %>
								<%= link_to 'Edit', edit_page_widget_path(@group, @page, widget, :column => column.id) %>
							<% end %>
							<%= render "cms/pages/edit/add_widget_links", :column => column %>												
						<% end %>
					
						<% column.rows.each_with_index do |sub_row, sub_row_index| %>					
							<div class="row" id="row<%= sub_row_index %>">
								<% sub_row.columns.each_with_index do |sub_column, sub_column_index| %>
									<div class="span<%= sub_column.span %> column" id="column<%= sub_column_index %>">
										<% sub_column.widgets.each do |widget| %>
											<%= render "cms/widgets/show/#{widget.widget_type}", :widget => widget %>
										<% end %>
										<%= render "cms/pages/edit/add_widget_links", :column => sub_column %>												
									</div>
								<% end %>
							</div>
						<% end %>
						
					</div>
					
				<% end %>
			</div>
			
		<% end %>
	
	</div>
</section>

<section>	
	<h2>Add row</h2>	
	<div class="add_row">
		<%= form_tag '/cms/pages/add_row' do %>
			<%= hidden_field_tag 'id', params[:id] %>
		   <div>
		    <%= select_tag :template, options_for_select(['12x0', '7x5', '3x9']) %>
				<%= submit_tag 'Add Row' %>
		  </div>				
		<% end %>
	</div>
</section>